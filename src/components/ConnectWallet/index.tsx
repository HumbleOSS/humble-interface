import * as React from "react";
import Menu from "@mui/material/Menu";
import MenuItem from "@mui/material/MenuItem";
import styled from "styled-components";
import { PROVIDER_ID, useWallet } from "@txnlab/use-wallet";
import ArrowDownwardIcon from "static/icon/icon-arrow-downward.svg";
import OnIcon from "static/icon/icon-on.svg";
import { compactAddress } from "../../utils/mp";
import { Box, Divider } from "@mui/material";

const AccountDropdown = styled.div`
  /* Layout */
  display: flex;
  padding: 10px;
  justify-content: center;
  align-items: center;
  gap: 4px;
  /* Style */
  border-radius: 12px;
  border: 1px solid var(--Color-Brand-White, #fff);
  /* Extra */
  cursor: pointer;
`;

const AccountDropdownLabel = styled.span`
  color: var(--Color-Brand-White, #fff);
  font-feature-settings: "clig" off, "liga" off;
  font-family: "IBM Plex Sans Condensed";
  font-size: 15px;
  font-style: normal;
  font-weight: 400;
  line-height: 120%; /* 18px */
`;

const AccountMenu = styled(Menu)`
  padding: 24px;
`;

const WalletContainer = styled.div`
  display: flex;
  padding: var(--Main-System-10px, 10px);
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: var(--Main-System-10px, 10px);
`;

const ProviderContainer = styled.div`
  /* Layout */
  width: 270px;
  display: flex;
  padding: 16px 8px;
  flex-direction: column;
  justify-content: center;
  align-items: flex-start;
  gap: 16px;
  /* Style */
  border-radius: 8px;
  background: rgba(231, 231, 231, 0.36);
`;

const ProviderIconContainer = styled.div`
  display: flex;
  width: 100%;
  justify-content: space-between;
  align-items: center;
`;

const ProviderName = styled.div`
  display: flex;
  width: 100px;
  align-items: center;
  gap: var(--Main-System-10px, 10px);
  flex-shrink: 0;
`;

const ConnectedAccountContainer = styled.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 12px;
`;

const AccountContainer = styled.div`
  display: flex;
  width: 200px;
  padding: 0px 63px;
  align-items: center;
  justify-content: space-between;
`;

const AccountNameContainer = styled.span`
  display: flex;
  width: 200px
  align-items: center;
  gap: var(--Main-System-10px, 10px);
  flex-shrink: 0;
`;

const AccountName = styled.span`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: flex-start;
  flex: 1 0 0;
  color: #161717;
  font-size: 16px;
  font-style: normal;
  font-weight: 600;
  line-height: 22px; /* 137.5% */
`;

const ActiveButtonContainer = styled.div`
  display: flex;
  width: 83px;
  flex-direction: column;
  justify-content: center;
  align-items: flex-end;
  gap: var(--Main-System-10px, 10px);
  flex-shrink: 0;
  margin-right: 24px;
`;

const ActiveButton = styled.div`
  display: flex;
  width: 100px;
  padding: 6px 0px 6px var(--Main-System-20px, 20px);
  justify-content: flex-end;
  align-items: center;
  gap: var(--Main-System-20px, 20px);
  color: #93f;
  text-align: center;
  leading-trim: both;
  text-edge: cap;
  font-size: 16px;
  font-style: normal;
  font-weight: 600;
  line-height: 20px; /* 125% */
  text-decoration-line: underline;
`;

const WalletIcon = styled.div`
  width: 53px;
  height: 53px;
  flex-shrink: 0;
  border-radius: 1000px;
`;

const ProviderNameLabel = styled.div`
  align-self: center;
  color: #161717;
  /*font-family: Inter;*/
  font-size: 16px;
  font-style: normal;
  font-weight: 600;
  line-height: 22px; /* 137.5% */
`;

const DisconnectButton = () => {
  return (
    <div>
      <svg
        width="150"
        height="45"
        viewBox="0 0 150 45"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <rect
          x="0.5"
          y="1"
          width="149"
          height="43"
          rx="21.5"
          stroke="#9933FF"
        />
        <path
          d="M15.8958 16.56H20.0678C20.6438 16.56 21.1851 16.6213 21.6918 16.744C22.2011 16.864 22.6704 17.04 23.0998 17.272C23.5291 17.504 23.9131 17.7867 24.2517 18.12C24.5931 18.4533 24.8824 18.832 25.1198 19.256C25.3571 19.68 25.5384 20.1453 25.6638 20.652C25.7918 21.1587 25.8558 21.7013 25.8558 22.28C25.8558 22.8587 25.7918 23.4013 25.6638 23.908C25.5384 24.4147 25.3571 24.88 25.1198 25.304C24.8824 25.728 24.5931 26.1067 24.2517 26.44C23.9131 26.7733 23.5291 27.056 23.0998 27.288C22.6704 27.52 22.2011 27.6973 21.6918 27.82C21.1824 27.94 20.6411 28 20.0678 28H15.8958V16.56ZM20.0118 25.832C20.5344 25.832 20.9998 25.7547 21.4078 25.6C21.8184 25.4427 22.1638 25.2133 22.4438 24.912C22.7264 24.6107 22.9411 24.24 23.0878 23.8C23.2371 23.3573 23.3118 22.8507 23.3118 22.28C23.3118 21.7093 23.2371 21.204 23.0878 20.764C22.9411 20.3213 22.7264 19.9493 22.4438 19.648C22.1638 19.3467 21.8184 19.1187 21.4078 18.964C20.9998 18.8067 20.5344 18.728 20.0118 18.728H18.3998V25.832H20.0118ZM29.2133 18.256H26.7693V16.16H29.2133V18.256ZM29.1893 28H26.7933V19.18H29.1893V28ZM34.0391 18.94C34.6871 18.94 35.2645 19.0107 35.7711 19.152C36.2805 19.2933 36.7098 19.4973 37.0591 19.764C37.4111 20.028 37.6778 20.3493 37.8591 20.728C38.0431 21.1067 38.1351 21.5347 38.1351 22.012H35.7711C35.7711 21.8067 35.7351 21.6227 35.6631 21.46C35.5911 21.2973 35.4831 21.1587 35.3391 21.044C35.1978 20.9293 35.0218 20.8427 34.8111 20.784C34.6031 20.7227 34.3631 20.692 34.0911 20.692C33.8511 20.692 33.6311 20.7147 33.4311 20.76C33.2311 20.8053 33.0605 20.8693 32.9191 20.952C32.7778 21.0347 32.6671 21.1347 32.5871 21.252C32.5098 21.3693 32.4711 21.4987 32.4711 21.64C32.4711 21.8133 32.5218 21.956 32.6231 22.068C32.7245 22.1773 32.8591 22.268 33.0271 22.34C33.1978 22.412 33.3938 22.4707 33.6151 22.516C33.8365 22.5587 34.0685 22.6 34.3111 22.64L34.8991 22.744C35.1365 22.784 35.3871 22.8307 35.6511 22.884C35.9178 22.9347 36.1805 23.0013 36.4391 23.084C36.6978 23.1667 36.9458 23.2707 37.1831 23.396C37.4205 23.5213 37.6298 23.6773 37.8111 23.864C37.9925 24.0507 38.1365 24.2733 38.2431 24.532C38.3498 24.7907 38.4031 25.096 38.4031 25.448C38.4031 25.8907 38.3111 26.2853 38.1271 26.632C37.9458 26.9787 37.6778 27.272 37.3231 27.512C36.9711 27.7493 36.5365 27.9293 36.0191 28.052C35.5045 28.1773 34.9125 28.24 34.2431 28.24C33.5391 28.24 32.9191 28.1707 32.3831 28.032C31.8498 27.8933 31.4018 27.692 31.0391 27.428C30.6791 27.1613 30.4071 26.8333 30.2231 26.444C30.0391 26.052 29.9471 25.604 29.9471 25.1H32.3111C32.3111 25.5427 32.4685 25.8827 32.7831 26.12C33.0978 26.3547 33.5778 26.472 34.2231 26.472C34.5058 26.472 34.7591 26.4507 34.9831 26.408C35.2098 26.3627 35.4005 26.2973 35.5551 26.212C35.7125 26.1267 35.8325 26.0227 35.9151 25.9C36.0005 25.7773 36.0431 25.6387 36.0431 25.484C36.0431 25.2947 35.9925 25.1413 35.8911 25.024C35.7898 24.904 35.6498 24.8053 35.4711 24.728C35.2951 24.648 35.0858 24.5827 34.8431 24.532C34.6005 24.4813 34.3378 24.4307 34.0551 24.38L33.4671 24.276C33.2511 24.2387 33.0178 24.1947 32.7671 24.144C32.5165 24.0933 32.2671 24.028 32.0191 23.948C31.7711 23.868 31.5311 23.768 31.2991 23.648C31.0698 23.528 30.8671 23.3787 30.6911 23.2C30.5151 23.0187 30.3738 22.8053 30.2671 22.56C30.1631 22.312 30.1111 22.02 30.1111 21.684C30.1111 21.26 30.2005 20.8787 30.3791 20.54C30.5578 20.2013 30.8151 19.9133 31.1511 19.676C31.4898 19.4387 31.9018 19.2573 32.3871 19.132C32.8751 19.004 33.4258 18.94 34.0391 18.94ZM41.365 23.588C41.365 23.996 41.4117 24.36 41.505 24.68C41.5983 24.9973 41.733 25.2653 41.909 25.484C42.085 25.7 42.301 25.8653 42.557 25.98C42.813 26.0947 43.1037 26.152 43.429 26.152C43.701 26.152 43.941 26.112 44.149 26.032C44.3597 25.9493 44.5397 25.836 44.689 25.692C44.841 25.548 44.9637 25.376 45.057 25.176C45.153 24.976 45.2237 24.756 45.269 24.516H47.661C47.5917 25.0627 47.4423 25.564 47.213 26.02C46.9863 26.476 46.6903 26.8693 46.325 27.2C45.9597 27.528 45.5317 27.784 45.041 27.968C44.553 28.1493 44.0143 28.24 43.425 28.24C42.985 28.24 42.569 28.1893 42.177 28.088C41.785 27.9893 41.4237 27.8467 41.093 27.66C40.7623 27.4707 40.465 27.2413 40.201 26.972C39.937 26.7 39.7117 26.392 39.525 26.048C39.341 25.7013 39.1997 25.3227 39.101 24.912C39.0023 24.4987 38.953 24.0573 38.953 23.588C38.953 23.1187 39.0023 22.6787 39.101 22.268C39.1997 21.8547 39.341 21.476 39.525 21.132C39.7117 20.788 39.937 20.48 40.201 20.208C40.465 19.936 40.7623 19.7067 41.093 19.52C41.4237 19.3307 41.785 19.1867 42.177 19.088C42.569 18.9893 42.985 18.94 43.425 18.94C44.0143 18.94 44.553 19.032 45.041 19.216C45.5317 19.3973 45.9597 19.6533 46.325 19.984C46.6903 20.312 46.9863 20.704 47.213 21.16C47.4423 21.616 47.5917 22.1173 47.661 22.664H45.273C45.2277 22.424 45.157 22.204 45.061 22.004C44.965 21.804 44.841 21.632 44.689 21.488C44.5397 21.3413 44.3597 21.228 44.149 21.148C43.941 21.068 43.701 21.028 43.429 21.028C43.1037 21.028 42.813 21.0853 42.557 21.2C42.301 21.312 42.085 21.4773 41.909 21.696C41.733 21.9147 41.5983 22.1827 41.505 22.5C41.4117 22.8173 41.365 23.18 41.365 23.588ZM48.3124 23.588C48.3124 23.1187 48.3617 22.6787 48.4604 22.268C48.559 21.8547 48.7004 21.476 48.8844 21.132C49.071 20.788 49.2964 20.48 49.5604 20.208C49.8244 19.936 50.1217 19.7067 50.4524 19.52C50.783 19.3307 51.1444 19.1867 51.5364 19.088C51.9284 18.9893 52.3444 18.94 52.7844 18.94C53.2244 18.94 53.6404 18.9893 54.0324 19.088C54.4244 19.1867 54.7857 19.3307 55.1164 19.52C55.447 19.7067 55.7444 19.936 56.0084 20.208C56.2724 20.48 56.4964 20.788 56.6804 21.132C56.867 21.476 57.0097 21.8547 57.1084 22.268C57.207 22.6787 57.2564 23.1187 57.2564 23.588C57.2564 24.0573 57.207 24.4987 57.1084 24.912C57.0097 25.3227 56.867 25.7013 56.6804 26.048C56.4964 26.392 56.2724 26.7 56.0084 26.972C55.7444 27.2413 55.447 27.4707 55.1164 27.66C54.7857 27.8467 54.4244 27.9893 54.0324 28.088C53.6404 28.1893 53.2244 28.24 52.7844 28.24C52.3444 28.24 51.9284 28.1893 51.5364 28.088C51.1444 27.9893 50.783 27.8467 50.4524 27.66C50.1217 27.4707 49.8244 27.2413 49.5604 26.972C49.2964 26.7 49.071 26.392 48.8844 26.048C48.7004 25.7013 48.559 25.3227 48.4604 24.912C48.3617 24.4987 48.3124 24.0573 48.3124 23.588ZM50.7244 23.588C50.7244 23.996 50.771 24.36 50.8644 24.68C50.9577 24.9973 51.0924 25.2653 51.2684 25.484C51.4444 25.7 51.6604 25.8653 51.9164 25.98C52.1724 26.0947 52.4617 26.152 52.7844 26.152C53.1097 26.152 53.399 26.096 53.6524 25.984C53.9084 25.8693 54.1244 25.7027 54.3004 25.484C54.4764 25.2653 54.611 24.9973 54.7044 24.68C54.7977 24.36 54.8444 23.996 54.8444 23.588C54.8444 23.18 54.7977 22.8173 54.7044 22.5C54.611 22.18 54.4764 21.912 54.3004 21.696C54.1244 21.4773 53.9084 21.312 53.6524 21.2C53.399 21.0853 53.1097 21.028 52.7844 21.028C52.4617 21.028 52.1724 21.0853 51.9164 21.2C51.6604 21.312 51.4444 21.4773 51.2684 21.696C51.0924 21.9147 50.9577 22.1827 50.8644 22.5C50.771 22.8173 50.7244 23.18 50.7244 23.588ZM60.4861 28H58.0901V19.18H60.4861V21.832C60.5795 21.3653 60.7168 20.952 60.8981 20.592C61.0795 20.232 61.3008 19.9307 61.5621 19.688C61.8235 19.4427 62.1235 19.2573 62.4621 19.132C62.8035 19.004 63.1781 18.94 63.5861 18.94C64.0608 18.94 64.4795 19.0253 64.8421 19.196C65.2075 19.3667 65.5141 19.6187 65.7621 19.952C66.0101 20.2853 66.1968 20.6973 66.3221 21.188C66.4501 21.676 66.5141 22.2387 66.5141 22.876V28H64.1181V23.276C64.1181 21.7773 63.5475 21.028 62.4061 21.028C62.0995 21.028 61.8275 21.08 61.5901 21.184C61.3528 21.2853 61.1515 21.4347 60.9861 21.632C60.8235 21.8293 60.6995 22.0747 60.6141 22.368C60.5288 22.6587 60.4861 22.9933 60.4861 23.372V28ZM69.8924 28H67.4964V19.18H69.8924V21.832C69.9857 21.3653 70.123 20.952 70.3044 20.592C70.4857 20.232 70.707 19.9307 70.9684 19.688C71.2297 19.4427 71.5297 19.2573 71.8684 19.132C72.2097 19.004 72.5844 18.94 72.9924 18.94C73.467 18.94 73.8857 19.0253 74.2484 19.196C74.6137 19.3667 74.9204 19.6187 75.1684 19.952C75.4164 20.2853 75.603 20.6973 75.7284 21.188C75.8564 21.676 75.9204 22.2387 75.9204 22.876V28H73.5244V23.276C73.5244 21.7773 72.9537 21.028 71.8124 21.028C71.5057 21.028 71.2337 21.08 70.9964 21.184C70.759 21.2853 70.5577 21.4347 70.3924 21.632C70.2297 21.8293 70.1057 22.0747 70.0204 22.368C69.935 22.6587 69.8924 22.9933 69.8924 23.372V28ZM85.4066 25.012C85.2866 25.5133 85.0986 25.964 84.8426 26.364C84.5893 26.7613 84.28 27.1 83.9146 27.38C83.5493 27.6573 83.1346 27.8693 82.6706 28.016C82.2093 28.1653 81.7106 28.24 81.1746 28.24C80.732 28.24 80.3133 28.1893 79.9186 28.088C79.5266 27.9867 79.1653 27.8413 78.8346 27.652C78.5066 27.46 78.2106 27.2267 77.9466 26.952C77.6853 26.6773 77.464 26.368 77.2826 26.024C77.1013 25.6773 76.9613 25.3 76.8626 24.892C76.7666 24.4813 76.7186 24.044 76.7186 23.58C76.7186 23.1187 76.7666 22.684 76.8626 22.276C76.9586 21.8653 77.096 21.488 77.2746 21.144C77.456 20.8 77.676 20.492 77.9346 20.22C78.1933 19.948 78.4853 19.7173 78.8106 19.528C79.1386 19.3387 79.4973 19.1933 79.8866 19.092C80.276 18.9907 80.6893 18.94 81.1266 18.94C81.78 18.94 82.372 19.0507 82.9026 19.272C83.4333 19.4907 83.8866 19.8027 84.2626 20.208C84.6413 20.6107 84.9333 21.0973 85.1386 21.668C85.344 22.236 85.4466 22.8693 85.4466 23.568C85.4466 23.6747 85.444 23.7827 85.4386 23.892C85.436 23.9987 85.428 24.108 85.4146 24.22H79.0306C79.0706 24.5507 79.1493 24.8467 79.2666 25.108C79.384 25.3667 79.5373 25.5867 79.7266 25.768C79.916 25.9467 80.1373 26.084 80.3906 26.18C80.6466 26.276 80.9306 26.324 81.2426 26.324C82.168 26.324 82.8053 25.8867 83.1546 25.012H85.4066ZM83.1466 22.74C83.0453 22.1053 82.8253 21.628 82.4866 21.308C82.1506 20.9853 81.7013 20.824 81.1386 20.824C80.8506 20.824 80.5893 20.8667 80.3546 20.952C80.12 21.0373 79.9146 21.1613 79.7386 21.324C79.5626 21.4867 79.4173 21.688 79.3026 21.928C79.188 22.1653 79.1066 22.436 79.0586 22.74H83.1466ZM88.5213 23.588C88.5213 23.996 88.5679 24.36 88.6613 24.68C88.7546 24.9973 88.8893 25.2653 89.0653 25.484C89.2413 25.7 89.4573 25.8653 89.7133 25.98C89.9693 26.0947 90.2599 26.152 90.5853 26.152C90.8573 26.152 91.0973 26.112 91.3053 26.032C91.5159 25.9493 91.6959 25.836 91.8453 25.692C91.9973 25.548 92.1199 25.376 92.2133 25.176C92.3093 24.976 92.3799 24.756 92.4253 24.516H94.8173C94.7479 25.0627 94.5986 25.564 94.3693 26.02C94.1426 26.476 93.8466 26.8693 93.4813 27.2C93.1159 27.528 92.6879 27.784 92.1973 27.968C91.7093 28.1493 91.1706 28.24 90.5813 28.24C90.1413 28.24 89.7253 28.1893 89.3333 28.088C88.9413 27.9893 88.5799 27.8467 88.2493 27.66C87.9186 27.4707 87.6213 27.2413 87.3573 26.972C87.0933 26.7 86.8679 26.392 86.6813 26.048C86.4973 25.7013 86.3559 25.3227 86.2573 24.912C86.1586 24.4987 86.1093 24.0573 86.1093 23.588C86.1093 23.1187 86.1586 22.6787 86.2573 22.268C86.3559 21.8547 86.4973 21.476 86.6813 21.132C86.8679 20.788 87.0933 20.48 87.3573 20.208C87.6213 19.936 87.9186 19.7067 88.2493 19.52C88.5799 19.3307 88.9413 19.1867 89.3333 19.088C89.7253 18.9893 90.1413 18.94 90.5813 18.94C91.1706 18.94 91.7093 19.032 92.1973 19.216C92.6879 19.3973 93.1159 19.6533 93.4813 19.984C93.8466 20.312 94.1426 20.704 94.3693 21.16C94.5986 21.616 94.7479 22.1173 94.8173 22.664H92.4293C92.3839 22.424 92.3133 22.204 92.2173 22.004C92.1213 21.804 91.9973 21.632 91.8453 21.488C91.6959 21.3413 91.5159 21.228 91.3053 21.148C91.0973 21.068 90.8573 21.028 90.5853 21.028C90.2599 21.028 89.9693 21.0853 89.7133 21.2C89.4573 21.312 89.2413 21.4773 89.0653 21.696C88.8893 21.9147 88.7546 22.1827 88.6613 22.5C88.5679 22.8173 88.5213 23.18 88.5213 23.588ZM101.291 27.932C100.552 28.1347 99.8932 28.236 99.3145 28.236C98.3438 28.236 97.6078 27.952 97.1065 27.384C96.6078 26.8133 96.3585 25.9667 96.3585 24.844V21.084H95.2545V19.18H96.3585V17.148H98.7545V19.18H101.291V21.084H98.7545V24.848C98.7545 25.3547 98.8478 25.7253 99.0345 25.96C99.2212 26.192 99.5185 26.308 99.9265 26.308C100.092 26.308 100.285 26.2907 100.507 26.256C100.728 26.2187 100.989 26.1613 101.291 26.084V27.932Z"
          fill="#9933FF"
        />
        <rect x="110" y="4.5" width="36" height="36" rx="18" fill="#9933FF" />
        <path
          d="M131 20L125 26M125 20L131 26M138 23C138 28.5228 133.523 33 128 33C122.477 33 118 28.5228 118 23C118 17.4772 122.477 13 128 13C133.523 13 138 17.4772 138 23Z"
          stroke="white"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </div>
  );
};

const ConnectButton = () => {
  return (
    <svg
      width="150"
      height="44"
      viewBox="0 0 150 44"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <rect
        x="0.5"
        y="0.5"
        width="149"
        height="43"
        rx="21.5"
        stroke="#9933FF"
      />
      <path
        d="M40.2729 21.78C40.2729 22.3907 40.3395 22.932 40.4729 23.404C40.6089 23.876 40.8049 24.2733 41.0609 24.596C41.3169 24.916 41.6315 25.1587 42.0049 25.324C42.3809 25.4893 42.8089 25.572 43.2889 25.572C44.0595 25.572 44.6769 25.3493 45.1409 24.904C45.6049 24.4587 45.9129 23.7907 46.0649 22.9H48.5769C48.5049 23.4013 48.3902 23.8693 48.2329 24.304C48.0782 24.7387 47.8835 25.136 47.6489 25.496C47.4169 25.8533 47.1489 26.172 46.8449 26.452C46.5409 26.7293 46.2049 26.964 45.8369 27.156C45.4689 27.3453 45.0702 27.4893 44.6409 27.588C44.2142 27.6893 43.7622 27.74 43.2849 27.74C42.7409 27.74 42.2262 27.676 41.7409 27.548C41.2555 27.42 40.8062 27.236 40.3929 26.996C39.9822 26.7533 39.6115 26.4573 39.2809 26.108C38.9529 25.7587 38.6742 25.364 38.4449 24.924C38.2155 24.4813 38.0382 23.996 37.9129 23.468C37.7902 22.94 37.7289 22.3773 37.7289 21.78C37.7289 21.18 37.7902 20.6173 37.9129 20.092C38.0382 19.564 38.2155 19.08 38.4449 18.64C38.6742 18.1973 38.9529 17.8013 39.2809 17.452C39.6115 17.1027 39.9822 16.808 40.3929 16.568C40.8062 16.3253 41.2555 16.14 41.7409 16.012C42.2262 15.884 42.7409 15.82 43.2849 15.82C43.7622 15.82 44.2142 15.8707 44.6409 15.972C45.0702 16.0707 45.4689 16.216 45.8369 16.408C46.2049 16.5973 46.5409 16.832 46.8449 17.112C47.1489 17.3893 47.4169 17.708 47.6489 18.068C47.8835 18.4253 48.0782 18.8213 48.2329 19.256C48.3902 19.6907 48.5049 20.1587 48.5769 20.66H46.0649C45.9129 19.772 45.6035 19.1053 45.1369 18.66C44.6702 18.212 44.0542 17.988 43.2889 17.988C42.8089 17.988 42.3809 18.0707 42.0049 18.236C41.6315 18.4013 41.3169 18.6453 41.0609 18.968C40.8049 19.288 40.6089 19.684 40.4729 20.156C40.3395 20.628 40.2729 21.1693 40.2729 21.78ZM49.3593 23.088C49.3593 22.6187 49.4086 22.1787 49.5073 21.768C49.6059 21.3547 49.7473 20.976 49.9313 20.632C50.1179 20.288 50.3433 19.98 50.6073 19.708C50.8713 19.436 51.1686 19.2067 51.4993 19.02C51.8299 18.8307 52.1913 18.6867 52.5833 18.588C52.9753 18.4893 53.3913 18.44 53.8313 18.44C54.2713 18.44 54.6873 18.4893 55.0793 18.588C55.4713 18.6867 55.8326 18.8307 56.1633 19.02C56.4939 19.2067 56.7913 19.436 57.0553 19.708C57.3193 19.98 57.5433 20.288 57.7273 20.632C57.9139 20.976 58.0566 21.3547 58.1553 21.768C58.2539 22.1787 58.3033 22.6187 58.3033 23.088C58.3033 23.5573 58.2539 23.9987 58.1553 24.412C58.0566 24.8227 57.9139 25.2013 57.7273 25.548C57.5433 25.892 57.3193 26.2 57.0553 26.472C56.7913 26.7413 56.4939 26.9707 56.1633 27.16C55.8326 27.3467 55.4713 27.4893 55.0793 27.588C54.6873 27.6893 54.2713 27.74 53.8313 27.74C53.3913 27.74 52.9753 27.6893 52.5833 27.588C52.1913 27.4893 51.8299 27.3467 51.4993 27.16C51.1686 26.9707 50.8713 26.7413 50.6073 26.472C50.3433 26.2 50.1179 25.892 49.9313 25.548C49.7473 25.2013 49.6059 24.8227 49.5073 24.412C49.4086 23.9987 49.3593 23.5573 49.3593 23.088ZM51.7713 23.088C51.7713 23.496 51.8179 23.86 51.9113 24.18C52.0046 24.4973 52.1393 24.7653 52.3153 24.984C52.4913 25.2 52.7073 25.3653 52.9633 25.48C53.2193 25.5947 53.5086 25.652 53.8313 25.652C54.1566 25.652 54.4459 25.596 54.6993 25.484C54.9553 25.3693 55.1713 25.2027 55.3473 24.984C55.5233 24.7653 55.6579 24.4973 55.7513 24.18C55.8446 23.86 55.8913 23.496 55.8913 23.088C55.8913 22.68 55.8446 22.3173 55.7513 22C55.6579 21.68 55.5233 21.412 55.3473 21.196C55.1713 20.9773 54.9553 20.812 54.6993 20.7C54.4459 20.5853 54.1566 20.528 53.8313 20.528C53.5086 20.528 53.2193 20.5853 52.9633 20.7C52.7073 20.812 52.4913 20.9773 52.3153 21.196C52.1393 21.4147 52.0046 21.6827 51.9113 22C51.8179 22.3173 51.7713 22.68 51.7713 23.088ZM61.533 27.5H59.137V18.68H61.533V21.332C61.6263 20.8653 61.7637 20.452 61.945 20.092C62.1263 19.732 62.3477 19.4307 62.609 19.188C62.8703 18.9427 63.1703 18.7573 63.509 18.632C63.8503 18.504 64.225 18.44 64.633 18.44C65.1077 18.44 65.5263 18.5253 65.889 18.696C66.2543 18.8667 66.561 19.1187 66.809 19.452C67.057 19.7853 67.2437 20.1973 67.369 20.688C67.497 21.176 67.561 21.7387 67.561 22.376V27.5H65.165V22.776C65.165 21.2773 64.5943 20.528 63.453 20.528C63.1463 20.528 62.8743 20.58 62.637 20.684C62.3997 20.7853 62.1983 20.9347 62.033 21.132C61.8703 21.3293 61.7463 21.5747 61.661 21.868C61.5757 22.1587 61.533 22.4933 61.533 22.872V27.5ZM70.9393 27.5H68.5433V18.68H70.9393V21.332C71.0326 20.8653 71.1699 20.452 71.3513 20.092C71.5326 19.732 71.7539 19.4307 72.0153 19.188C72.2766 18.9427 72.5766 18.7573 72.9153 18.632C73.2566 18.504 73.6313 18.44 74.0393 18.44C74.5139 18.44 74.9326 18.5253 75.2953 18.696C75.6606 18.8667 75.9673 19.1187 76.2153 19.452C76.4633 19.7853 76.6499 20.1973 76.7753 20.688C76.9033 21.176 76.9673 21.7387 76.9673 22.376V27.5H74.5713V22.776C74.5713 21.2773 74.0006 20.528 72.8593 20.528C72.5526 20.528 72.2806 20.58 72.0433 20.684C71.8059 20.7853 71.6046 20.9347 71.4393 21.132C71.2766 21.3293 71.1526 21.5747 71.0673 21.868C70.9819 22.1587 70.9393 22.4933 70.9393 22.872V27.5ZM86.4535 24.512C86.3335 25.0133 86.1455 25.464 85.8895 25.864C85.6362 26.2613 85.3268 26.6 84.9615 26.88C84.5962 27.1573 84.1815 27.3693 83.7175 27.516C83.2562 27.6653 82.7575 27.74 82.2215 27.74C81.7788 27.74 81.3602 27.6893 80.9655 27.588C80.5735 27.4867 80.2122 27.3413 79.8815 27.152C79.5535 26.96 79.2575 26.7267 78.9935 26.452C78.7322 26.1773 78.5108 25.868 78.3295 25.524C78.1482 25.1773 78.0082 24.8 77.9095 24.392C77.8135 23.9813 77.7655 23.544 77.7655 23.08C77.7655 22.6187 77.8135 22.184 77.9095 21.776C78.0055 21.3653 78.1428 20.988 78.3215 20.644C78.5028 20.3 78.7228 19.992 78.9815 19.72C79.2402 19.448 79.5322 19.2173 79.8575 19.028C80.1855 18.8387 80.5442 18.6933 80.9335 18.592C81.3228 18.4907 81.7362 18.44 82.1735 18.44C82.8268 18.44 83.4188 18.5507 83.9495 18.772C84.4802 18.9907 84.9335 19.3027 85.3095 19.708C85.6882 20.1107 85.9802 20.5973 86.1855 21.168C86.3908 21.736 86.4935 22.3693 86.4935 23.068C86.4935 23.1747 86.4908 23.2827 86.4855 23.392C86.4828 23.4987 86.4748 23.608 86.4615 23.72H80.0775C80.1175 24.0507 80.1962 24.3467 80.3135 24.608C80.4308 24.8667 80.5842 25.0867 80.7735 25.268C80.9628 25.4467 81.1842 25.584 81.4375 25.68C81.6935 25.776 81.9775 25.824 82.2895 25.824C83.2148 25.824 83.8522 25.3867 84.2015 24.512H86.4535ZM84.1935 22.24C84.0922 21.6053 83.8722 21.128 83.5335 20.808C83.1975 20.4853 82.7482 20.324 82.1855 20.324C81.8975 20.324 81.6362 20.3667 81.4015 20.452C81.1668 20.5373 80.9615 20.6613 80.7855 20.824C80.6095 20.9867 80.4642 21.188 80.3495 21.428C80.2348 21.6653 80.1535 21.936 80.1055 22.24H84.1935ZM89.5681 23.088C89.5681 23.496 89.6148 23.86 89.7081 24.18C89.8015 24.4973 89.9361 24.7653 90.1121 24.984C90.2881 25.2 90.5041 25.3653 90.7601 25.48C91.0161 25.5947 91.3068 25.652 91.6321 25.652C91.9041 25.652 92.1441 25.612 92.3521 25.532C92.5628 25.4493 92.7428 25.336 92.8921 25.192C93.0441 25.048 93.1668 24.876 93.2601 24.676C93.3561 24.476 93.4268 24.256 93.4721 24.016H95.8641C95.7948 24.5627 95.6455 25.064 95.4161 25.52C95.1895 25.976 94.8935 26.3693 94.5281 26.7C94.1628 27.028 93.7348 27.284 93.2441 27.468C92.7561 27.6493 92.2175 27.74 91.6281 27.74C91.1881 27.74 90.7721 27.6893 90.3801 27.588C89.9881 27.4893 89.6268 27.3467 89.2961 27.16C88.9655 26.9707 88.6681 26.7413 88.4041 26.472C88.1401 26.2 87.9148 25.892 87.7281 25.548C87.5441 25.2013 87.4028 24.8227 87.3041 24.412C87.2055 23.9987 87.1561 23.5573 87.1561 23.088C87.1561 22.6187 87.2055 22.1787 87.3041 21.768C87.4028 21.3547 87.5441 20.976 87.7281 20.632C87.9148 20.288 88.1401 19.98 88.4041 19.708C88.6681 19.436 88.9655 19.2067 89.2961 19.02C89.6268 18.8307 89.9881 18.6867 90.3801 18.588C90.7721 18.4893 91.1881 18.44 91.6281 18.44C92.2175 18.44 92.7561 18.532 93.2441 18.716C93.7348 18.8973 94.1628 19.1533 94.5281 19.484C94.8935 19.812 95.1895 20.204 95.4161 20.66C95.6455 21.116 95.7948 21.6173 95.8641 22.164H93.4761C93.4308 21.924 93.3601 21.704 93.2641 21.504C93.1681 21.304 93.0441 21.132 92.8921 20.988C92.7428 20.8413 92.5628 20.728 92.3521 20.648C92.1441 20.568 91.9041 20.528 91.6321 20.528C91.3068 20.528 91.0161 20.5853 90.7601 20.7C90.5041 20.812 90.2881 20.9773 90.1121 21.196C89.9361 21.4147 89.8015 21.6827 89.7081 22C89.6148 22.3173 89.5681 22.68 89.5681 23.088ZM102.337 27.432C101.599 27.6347 100.94 27.736 100.361 27.736C99.3907 27.736 98.6547 27.452 98.1534 26.884C97.6547 26.3133 97.4054 25.4667 97.4054 24.344V20.584H96.3014V18.68H97.4054V16.648H99.8014V18.68H102.337V20.584H99.8014V24.348C99.8014 24.8547 99.8947 25.2253 100.081 25.46C100.268 25.692 100.565 25.808 100.973 25.808C101.139 25.808 101.332 25.7907 101.553 25.756C101.775 25.7187 102.036 25.6613 102.337 25.584V27.432Z"
        fill="#9933FF"
      />
      <rect x="110" y="4" width="36" height="36" rx="18" fill="#9933FF" />
      <path
        d="M128 18.5V26.5M124 22.5H132M138 22.5C138 28.0228 133.523 32.5 128 32.5C122.477 32.5 118 28.0228 118 22.5C118 16.9772 122.477 12.5 128 12.5C133.523 12.5 138 16.9772 138 22.5Z"
        stroke="white"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
    </svg>
  );
};

function BasicMenu() {
  const { activeAccount, providers, connectedAccounts } = useWallet();
  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);
  const open = Boolean(anchorEl);
  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {
    setAnchorEl(event.currentTarget);
  };
  const handleClose = () => {
    setAnchorEl(null);
  };
  console.log({ connectedAccounts });
  return (
    <div>
      {!activeAccount ? (
        <AccountDropdown
          onClick={(e: any) => {
            e.preventDefault();
            handleClick(e);
          }}
        >
          <AccountDropdownLabel>Connect</AccountDropdownLabel>
          <img src={OnIcon} height="20" width="20" />
        </AccountDropdown>
      ) : (
        <AccountDropdown
          id="basic-button"
          aria-controls={open ? "basic-menu" : undefined}
          aria-haspopup="true"
          aria-expanded={open ? "true" : undefined}
          onClick={(e: any) => {
            handleClick(e);
          }}
        >
          <AccountDropdownLabel>
            {compactAddress(activeAccount?.address || "")}
          </AccountDropdownLabel>
          <img
            style={{
              transform: open ? "rotate(180deg)" : "rotate(0deg)",
              transition: "transform 0.3s",
            }}
            src={ArrowDownwardIcon}
          />
        </AccountDropdown>
      )}

      <AccountMenu
        id="basic-menu"
        anchorEl={anchorEl}
        open={open}
        onClose={handleClose}
        MenuListProps={{
          "aria-labelledby": "basic-button",
        }}
        PaperProps={{
          elevation: 0,
          sx: {
            display: "inline-flex",
            padding: "18px",
            flexDirection: "column",
            alignItems: "flex-start",
            gap: "24px",
            borderRadius: "16px",
            overflow: "visible",
            filter: "drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",
            mt: 2,
            "& .MuiAvatar-root": {
              width: 32,
              height: 32,
              ml: -0.5,
              mr: 1,
            },
            /*
            "&::before": {
              content: '""',
              display: "block",
              position: "absolute",
              top: 0,
              right: 20,
              width: 20,
              height: 20,
              bgcolor: "background.paper",
              transform: "translateY(-50%) rotate(45deg)",
              zIndex: 0,
            },
            */
          },
        }}
        transformOrigin={{ horizontal: "right", vertical: "top" }}
        anchorOrigin={{ horizontal: "right", vertical: "bottom" }}
      >
        <WalletContainer>
          {providers?.map((provider) => {
            return (
              <ProviderContainer>
                <ProviderIconContainer>
                  <ProviderName>
                    <WalletIcon
                      style={{
                        background: `url(${provider.metadata.icon}) lightgray 50% / cover no-repeat`,
                      }}
                    />
                    <ProviderNameLabel>
                      {provider.metadata.name}
                    </ProviderNameLabel>
                  </ProviderName>
                  {connectedAccounts?.some(
                    (el: any) => el.providerId === provider.metadata.id
                  ) ? (
                    <Box
                      onClick={(e: any) => {
                        const provider = providers?.find(
                          (p) => p.metadata.id === activeAccount?.providerId
                        );
                        provider?.disconnect();
                      }}
                    >
                      <DisconnectButton />
                    </Box>
                  ) : (
                    <Box
                      onClick={(e: any) => {
                        provider?.connect();
                        if (provider?.metadata.id !== PROVIDER_ID.KIBISIS) {
                          setAnchorEl(null);
                        }
                      }}
                    >
                      <ConnectButton />
                    </Box>
                  )}
                </ProviderIconContainer>
                <ConnectedAccountContainer>
                  {connectedAccounts
                    ?.filter((a) => a.providerId === provider.metadata.id)
                    .map((account) => {
                      return (
                        <AccountContainer>
                          <AccountNameContainer>
                            <AccountName>
                              {account.address.slice(0, 4)}
                            </AccountName>
                          </AccountNameContainer>
                          <ActiveButtonContainer>
                            {account.address !== activeAccount?.address ? (
                              <ActiveButton
                                onClick={(e: any) => {
                                  provider?.setActiveProvider();
                                  provider?.setActiveAccount(account.address);
                                }}
                              >
                                Set Active
                              </ActiveButton>
                            ) : null}
                          </ActiveButtonContainer>
                        </AccountContainer>
                      );
                    })}
                </ConnectedAccountContainer>
              </ProviderContainer>
            );
          })}
        </WalletContainer>
        {/*<MenuItem
          onClick={(e) => {
            const provider = providers?.find(
              (p) => p.metadata.id === activeAccount?.providerId
            );
            provider?.disconnect();
          }}
        >
          Disconnect
        </MenuItem>
        */}
      </AccountMenu>
    </div>
  );
}

export default BasicMenu;
